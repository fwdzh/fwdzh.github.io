# [P4570 [BJWC2011] 元素](https://www.luogu.com.cn/problem/P4570)

tag: 线性基，贪心

## 题意

$n$ 对数字 $x, y$，选则若干对数字，使得其中不存在 $x$ 异或和为 0 的子集，且 $y$ 之和最大。

## solution

就是取一个 $x$ 的线性基，使得 $y$ 值和最大，所以优先插入 $y$ 大的。

到是也没有证明，但是线性基的，感觉很多都是类似。

如果随便插入，那么如果你发现一对数字插不进去，但里面有 $y$ 更小的，那我们可能要删一个 $x$，把当前的插进去。排了序就不需要这样麻烦了。

```cpp
#include<bits/stdc++.h>
using namespace std;
using LL = long long;

int main()
{
    int n; cin >> n;
    vector<LL> v(64);
    auto Insert = [&](LL x){
        for(int i = 63; i >= 0; i--){
            if(x >> i & 1){
                if(v[i])
                    x ^= v[i];
                else{
                    v[i] = x;
                    return true;
                }
            }
        }
        return false;
    };
    vector<pair<LL, int>> vec(n);
    for(int i = 0; i < n; i++)
        cin >> vec[i].first >> vec[i].second;
    ranges::sort(vec, [](pair<LL, int> x, pair<LL, int> y){
        return x.second > y.second;
    });
    int ans = 0;
    for(auto [number, magic] : vec){
        if(Insert(number))
            ans += magic;
    }
    cout << ans << '\n';
    return 0;
}
```